<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>M&M - Nómina</title>
  <link rel="stylesheet" href="assets/styles.css?v=20251020" />
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
  <script src="./assets/js/config.js"></script>
  <link rel="stylesheet" href="assets/css/components/cards.css" />
  <link rel="stylesheet" href="assets/css/components/buttons.css" />
  <link rel="stylesheet" href="assets/css/components/modals.css" />
</head>
<body data-page="nomina">
  <div class="topbar hidden" id="appHeader">
    <div class="topbar-inner">
      <div class="topbar-card">
        <div class="row between" style="align-items:center;gap:8px;flex-wrap:wrap;">
          <div class="brand">
            <img id="brandLogo" src="assets/lightlogo.png" alt="M&M logo" />
            <div class="company">Empresa: <span id="companyName">-</span></div>
          </div>
          <div class="row" style="gap:6px;align-items:center;">
            <button id="logoutBtn" class="secondary hidden">Salir</button>
            <button id="denseToggle" class="secondary" title="Modo compacto">??</button>
            <button id="themeToggle" class="secondary" title="Cambiar tema">??</button>
          </div>
        </div>
        <div class="top-tabs">
          <nav class="tabs">
            <button data-tab="home" data-href="index.html">Inicio</button>
            <button data-tab="notas" data-feature="notas" data-href="notas.html">Notas</button>
            <button data-tab="ventas" data-feature="ventas" data-href="ventas.html">Ventas</button>
            <button data-tab="cotizaciones" data-feature="cotizaciones" data-href="cotizaciones.html">Cotizaciones</button>
            <button data-tab="inventario" data-feature="inventario" data-href="inventario.html">Inventario</button>
            <button data-tab="precios" data-feature="precios" data-href="precios.html">Lista de precios</button>
            <button data-tab="cashflow" data-feature="cashflow" data-href="cashflow.html">Flujo de Caja</button>
            <button data-tab="nomina" data-feature="tecnicos" data-href="nomina.html" class="active">Nómina</button>
            <button data-tab="formatos" data-feature="templates" data-href="template-selector.html">Formatos</button>
            <button data-tab="skus" data-feature="skus" data-href="skus.html">SKUs</button>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <main>
    <section class="tab active">
      <div class="card">
        <h3>Conceptos por empresa</h3>
        <div class="row wrap" style="gap:8px;align-items:center;">
          <select id="pc-type">
            <option value="earning">Ingreso</option>
            <option value="deduction">Descuento</option>
            <option value="surcharge">Recargo</option>
          </select>
          <select id="pc-amountType">
            <option value="fixed">Fijo</option>
            <option value="percent">Porcentaje</option>
          </select>
          <input id="pc-code" placeholder="COD" style="width:100px" />
          <input id="pc-name" placeholder="Nombre" />
          <input id="pc-value" type="number" step="0.01" placeholder="Valor" style="width:120px" />
          <button id="pc-add" class="secondary">+ Agregar</button>
        </div>
        <div id="pc-list" style="margin-top:10px"></div>
      </div>

      <div class="card" style="margin-top:12px;">
        <div class="row between" style="align-items:center;">
          <h3>Asignaciones por técnico</h3>
          <div class="row" style="gap:8px;align-items:center;flex-wrap:wrap;">
            <select id="pa-technicianSel" style="min-width:220px"></select>
            <select id="pa-conceptSel" style="min-width:260px"></select>
            <input id="pa-value" type="number" step="0.01" placeholder="Valor override" style="width:140px" />
            <button id="pa-save" class="secondary">Guardar</button>
          </div>
        </div>
        <div id="pa-list" class="muted" style="margin-top:6px;font-size:12px;">Selecciona un técnico para ver asignaciones.</div>
      </div>

      <div class="card" style="margin-top:12px;">
        <h3>Liquidación</h3>
        <div class="row wrap" style="gap:8px;align-items:center;">
          <select id="pl-periodSel" style="min-width:240px"></select>
          <select id="pl-technicianSel" style="min-width:240px"></select>
          <input id="pl-base" type="number" step="0.01" placeholder="Sueldo base" style="width:140px" />
          <button id="pl-preview" class="secondary">Previsualizar</button>
          <button id="pl-approve">Aprobar</button>
        </div>
        <div class="muted" style="margin-top:6px;font-size:12px;">La comisión se calcula por nombre del técnico en ventas cerradas del período.</div>
        <div id="pl-result" style="margin-top:10px"></div>
      </div>

      <div class="card" style="margin-top:12px;">
        <h3>Períodos</h3>
        <div class="row wrap" style="gap:8px;align-items:center;">
          <input id="ppd-start" type="date" />
          <input id="ppd-end" type="date" />
          <select id="ppd-type" style="min-width:160px">
            <option value="monthly">Mensual</option>
            <option value="biweekly">Quincenal</option>
            <option value="weekly">Semanal</option>
          </select>
          <button id="ppd-create" class="secondary">Crear período</button>
        </div>
        <div id="ppd-msg" class="muted" style="margin-top:6px;font-size:12px;"></div>
      </div>

      <div class="card" style="margin-top:12px;">
        <h3>Pagar</h3>
        <div class="row wrap" style="gap:8px;align-items:center;">
          <input id="pp-settlementId" placeholder="SettlementId" style="width:240px" />
          <input id="pp-accountId" placeholder="AccountId" style="width:240px" />
          <button id="pp-pay">Pagar</button>
        </div>
        <div id="pp-result" style="margin-top:10px"></div>
      </div>
    </section>
  </main>

  <script src="./assets/js/api.js"></script>
  <script type="module" src="./assets/js/app.js" charset="utf-8"></script>
  <script type="module" src="./assets/js/payroll.js"></script>
  <script src="./assets/js/input-fix.js"></script>
</body>
<!-- Nota: en una iteración siguiente reemplazaremos IDs manuales por selectores bonitos. -->
</html>


