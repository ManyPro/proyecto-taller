<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Panel Developer</title>
  <link rel="stylesheet" href="assets/styles.css?v=20251010" />
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
  <script src="./assets/js/config.js"></script>
  <script src="./assets/js/api.js"></script>
</head>
<body data-page="developer">
  <main>
    <section id="loginSection">
      <div class="card" style="max-width:420px;margin:40px auto;">
        <h2>Ingreso Developer</h2>
        <label>Correo</label>
        <input id="d-email" type="email" />
        <label>Contrase√±a</label>
        <input id="d-password" type="password" />
        <div class="row" style="gap:8px;margin-top:8px;">
          <button id="d-login">Entrar</button>
        </div>
      </div>
    </section>
  </main>
  <script type="module">
  import { API } from './assets/js/api.esm.js';
  async function req(path, opts={}){
    const res = await fetch((API.base||'')+path, { ...opts, headers: { 'Content-Type':'application/json' }, body: opts.body?JSON.stringify(opts.body):undefined });
    const txt = await res.text(); let data; try{ data=JSON.parse(txt);}catch{ data=txt; }
    if(!res.ok) throw new Error(data?.error || res.statusText);
    return data;
  }
  document.getElementById('d-login').onclick = async ()=>{
    const email = document.getElementById('d-email').value.trim().toLowerCase();
    const password = document.getElementById('d-password').value;
    try{
      const r = await req('/api/v1/admin/auth/login', { method:'POST', body:{ email, password } });
      alert('Login OK (developer). Abre admin.html para gestionar empresas.');
    }catch(e){ alert(e.message||'Error'); }
  };
  </script>
</body>
</html>
