:root{
  /* Paleta base (tema oscuro actual) */
  --bg:#0f172a;         /* fondo general */
  --card:#111827;       /* tarjetas/paneles */
  --card-alt:#0b1220;   /* variante inputs / headers */
  --text:#e5e7eb;       /* texto base */
  --text-invert:#0f172a;/* texto sobre superficies claras */
  --muted:#9ca3af;      /* texto secundario */
  --accent:#2563eb;     /* botones/activos */
  --accent-hover:#1d4ed8;
  --danger:#ef4444;     /* acciones destructivas */
  --border:#1f2937;     /* líneas / bordes */
  --input-bg:#0b1220;   /* fondo inputs */
  --scroll-track:#0b1220;
  --scroll-thumb:#334155;
  --focus-ring:0 0 0 2px rgba(37,99,235,.5);
  --shadow-elev:0 10px 35px rgba(0,0,0,.45);
  --table-head:#0b1220;
  --badge-bg:rgba(0,0,0,.66);
  --header-bg:linear-gradient(90deg,#0f172a,#152033); /* barra superior */
  --tab-bg:var(--card-alt);
  --tab-border:var(--border);
  --tab-bg-active:var(--accent);
  --tab-text:#ffffff;
  --tab-text-active:#ffffff;
  --sales-tab-bg:var(--card-alt);
  --sales-tab-bg-active:#1e293b;
  --sales-tab-text:var(--text);
  --sales-tab-text-active:#1e293b;
  --highlight-bg:rgba(37,99,235,.12); /* para filas o capsulas seleccionadas */
  --added-row-bg:rgba(56,189,248,.10); /* items ya agregados desde cotización */
  --added-row-border:rgba(56,189,248,.25);
  --sales-tab-border-active:#2563eb;
  --avatar-bg:#1e293b;
  --plate-chip-bg:#1e293b;
  --plate-chip-text:#ffffff;
  --inv-badge-bg:#065f46;        /* verde sutil oscuro */
  --inv-badge-text:#ecfdf5;
  --inv-badge-border:#10b98133;
  /* Badges adicionales (precio lista / servicio) */
  --price-badge-bg:#1d4ed8;      /* azul */
  --price-badge-text:#ffffff;
  --price-badge-border:#3b82f633;
  --service-badge-bg:#92400e;    /* ámbar oscuro */
  --service-badge-text:#fff7ed;
  --service-badge-border:#f59e0b33;
}

/* Tema claro: se aplica añadiendo body.theme-light */
body.theme-light{
  --bg:#f5f7fb;
  --card:#ffffff;
  --card-alt:#f1f5f9;
  --text:#1f2937;
  --text-invert:#ffffff;
  --muted:#64748b;
  --accent:#2563eb;
  --accent-hover:#1d4ed8;
  --danger:#dc2626;
  --border:#d0d7e2;
  --input-bg:#ffffff;
  --scroll-track:#e2e8f0;
  --scroll-thumb:#94a3b8;
  --focus-ring:0 0 0 2px rgba(37,99,235,.35);
  --table-head:#f1f5f9;
  --badge-bg:#2563eb;
  --shadow-elev:0 6px 20px rgba(0,0,0,.15);
  --header-bg:linear-gradient(90deg,#ffffff,#f1f5f9);
  --tab-bg:#f1f5f9;
  --tab-border:#d9e0e9;
  --tab-bg-active:#2563eb;
  --tab-text:#334155;
  --tab-text-active:#ffffff;
  --sales-tab-bg:#f1f5f9;
  --sales-tab-bg-active:#dbe4ee;
  --sales-tab-text:#334155;
  --sales-tab-text-active:#1e293b;
  --highlight-bg:rgba(37,99,235,.13);
  --added-row-bg:rgba(56,189,248,.18);
  --added-row-border:rgba(2,132,199,.45);
  --sales-tab-border-active:#2563eb;
  --avatar-bg:#d8e2ec;
  --plate-chip-bg:#1e293b; /* fondo oscuro para placa en claro */
  --plate-chip-text:#ffffff;
  --inv-badge-bg:#047857;        /* verde para modo claro */
  --inv-badge-text:#ecfdf5;
  --inv-badge-border:#05966966;
  --price-badge-bg:#1d4ed8;
  --price-badge-text:#ffffff;
  --price-badge-border:#2563eb55;
  --service-badge-bg:#b45309;
  --service-badge-text:#fff7ed;
  --service-badge-border:#f59e0b55;
}

/* ===== Base ===== */
*{ box-sizing:border-box; }
html,body{ min-height:100%; }
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
  background:var(--bg);
  color:var(--text);
  transition:background .25s ease,color .25s ease;
}
.hidden{ display:none; }

header{
  display:flex; justify-content:space-between; align-items:center;
  padding:16px 24px; border-bottom:1px solid var(--border);
  background:var(--header-bg);
  backdrop-filter:blur(4px);
}
h1{ margin:0; font-size:20px; }
main{ padding:16px; max-width:1100px; margin:0 auto; }
footer{ text-align:center; color:var(--muted); padding:20px; }

/* ===== Componentes ===== */
.card{
  background:var(--card);               /* adaptable tema */
  border:1px solid var(--border);
  border-radius:12px;
  padding:16px;
  margin-bottom:16px;
  box-shadow:var(--shadow-elev);
  transition:background .25s ease, border-color .25s ease, box-shadow .25s ease;
}

label{
  display:block; font-size:12px; color:var(--muted); margin-top:8px;
}

input,select,textarea{
  width:100%; padding:10px; border-radius:10px;
  border:1px solid var(--border); background:var(--input-bg); color:var(--text);
  transition:background .25s ease, color .25s ease, border-color .25s ease;
}
input:focus,select:focus,textarea:focus{ outline:none; box-shadow:var(--focus-ring); }
textarea{ resize:vertical; }

button{
  background:var(--accent); color:var(--text-invert); border:0;
  padding:10px 14px; border-radius:10px; cursor:pointer; margin-top:10px; line-height:1.1;
  transition:background .2s ease, color .2s ease, border-color .2s ease, box-shadow .2s ease;
}
button:hover{ background:var(--accent-hover); }
button.secondary{ background:transparent; color:var(--text); border:1px solid var(--border); }
button.secondary:hover{ background:var(--card-alt); }
button.danger{ background:var(--danger); }
button:focus{ outline:none; box-shadow:var(--focus-ring); }

.row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:16px; }
.span-2{ grid-column:1 / -1; }

@media (max-width:900px){
  .grid-2{ grid-template-columns:1fr; }
}

/* ===== Tabs de la app ===== */
.tabs{ display:flex; gap:6px; margin-bottom:12px; }
.tabs button{ background:var(--tab-bg); border:1px solid var(--tab-border); color:var(--tab-text); transition:background .18s ease, color .18s ease, border-color .18s ease; }
.tabs button.active{ background:var(--tab-bg-active); color:var(--tab-text-active); border-color:var(--tab-bg-active); box-shadow:0 0 0 1px rgba(0,0,0,.18),0 0 0 3px rgba(255,255,255,.04) inset; }
.tabs button:not(.active):hover{ background:var(--highlight-bg); }

/* ===== Secciones (show/hide) ===== */
.tab{ display:none; }
.tab.active{ display:block; }
.tab[hidden]{ display:none !important; }

/* ===== Notas – Filtros ===== */
#notes-filters .filters-bar{
  display:grid; grid-template-columns:1.2fr 1fr 1fr auto; gap:12px; align-items:end;
}
#notes-filters .filters-bar .field label{ margin-top:0; }
#notes-filters .filters-bar .apply-field button{ margin-top:0; }
@media (max-width:900px){ #notes-filters .filters-bar{ grid-template-columns:1fr; } }

/* ===== Inventario ===== */
#inventory-top{ display:grid; grid-template-columns:1fr 1fr; gap:16px; align-items:stretch; }
#inventory-top .card{ height:100%; }
#vi-card-lista{ min-height:420px; }

/* Tarjeta de ítem en inventario */
#itemsList .list-item{
  display:grid; grid-template-columns:1fr 2fr auto; gap:16px; align-items:center;
  padding:16px; border:1px solid rgba(255,255,255,.06); border-radius:12px; margin-bottom:12px;
}
.it-gallery{ display:flex; gap:8px; flex-wrap:wrap; }
.it-gallery img{
  width:96px; height:96px; object-fit:cover; border-radius:8px; border:1px solid rgba(255,255,255,.08);
}
.it-qr{ display:flex; flex-direction:column; align-items:center; gap:6px; }
.it-qr img{
  width:140px; height:140px; image-rendering:pixelated; border-radius:8px; background:#fff;
  padding:6px; border:1px solid rgba(255,255,255,.12);
}
.it-qr-actions{ display:flex; gap:8px; }
.it-text .it-title{ font-weight:700; margin-bottom:6px; }
.it-text .it-line span{ opacity:.75; }

/* Galería genérica de medios */
.item-media{ display:grid; grid-template-columns:repeat(auto-fill,minmax(120px,1fr)); gap:8px; margin-top:8px; }
.item-thumb{
  width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:10px; border:1px solid #1f2937; background:#0b1220;
  cursor:zoom-in; transition:transform .15s ease;
}
.item-thumb:hover{ transform:scale(1.02); }

/* ===== Lista de stickers ===== */
.sticker-toolbar{ gap:10px; align-items:center; margin-top:8px; }
.sticker-check{ display:inline-flex; gap:8px; align-items:center; font-size:13px; color:var(--muted); }
.sticker-check input[type="checkbox"]{ width:18px; height:18px; accent-color:var(--accent); }

/* ===== Notas – tarjeta y badge de placa ===== */
.note{ border:1px solid var(--border); border-radius:10px; padding:12px; background:var(--card-alt); }
.note .actions{ margin-top:8px; }
.note .plate{
  --plate-color:#6d28d9;
  display:inline-block; padding:3px 10px; border:2px solid var(--plate-color);
  color:#fff; background:var(--badge-bg); border-radius:9999px; font-weight:800; letter-spacing:.5px; margin-bottom:8px;
}

/* ===== Tablas genéricas ===== */
.table-wrap{ overflow:auto; }
.table{ width:100%; border-collapse:collapse; font-size:14px; }
.table th,.table td{ border:1px solid var(--border); padding:8px; }
.table th{ background:var(--table-head); position:sticky; top:0; z-index:1; }
.table input,.table select{ width:100%; }

/* ===== Modal global ===== */
#modal.modal{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center; padding:24px;
  background:rgba(2,6,23,.55); backdrop-filter:blur(4px); z-index:10000;
}
#modal.modal:not(.hidden){ display:flex; }
#modal .modal-content{
  position:relative; width:min(800px,100%); max-height:85vh; overflow:auto;
  background:var(--card); border:1px solid var(--border); border-radius:14px; padding:16px; box-shadow:var(--shadow-elev);
  transition:background .25s ease, border-color .25s ease, box-shadow .25s ease;
}
#modal .close{
  position:absolute; top:8px; right:8px; background:transparent; border:0; color:#cbd5e1;
  font-size:22px; line-height:1; width:32px; height:32px; border-radius:8px; cursor:pointer;
}
#modal .close:hover{ background:#0b1220; }

/* ===== Cotizaciones ===== */
#q-summary{ overflow:auto; scrollbar-width:thin; scrollbar-color:#334155 #0b1220; }
#q-summary::-webkit-scrollbar{ width:8px; }
#q-summary::-webkit-scrollbar-track{ background:var(--scroll-track); border-radius:8px; }
#q-summary::-webkit-scrollbar-thumb{ background:var(--scroll-thumb); border-radius:8px; border:2px solid var(--scroll-track); }
#q-summary .q-no{ margin:0 0 8px 0; font-size:1rem; }
#q-summary .q-no strong{ font-size:1.2rem; font-weight:700; }

/* Ítems en tarjetas (2 cols) */
.q-grid-2cols{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:16px; }
@media (max-width:900px){ .q-grid-2cols{ grid-template-columns:1fr; } }
.tr.q-row-card, .q-row-card{
  display:flex !important; flex-direction:column !important; gap:8px; padding:12px;
  border:1px solid var(--border); border-radius:10px; background:var(--card-alt);
  transition:background .25s ease,border-color .25s ease;
}
.q-row-card>div{ width:100%; }
.q-row-card .small input{ text-align:right; }
#q-items-card .totals{ display:flex; gap:16px; flex-wrap:wrap; margin-top:6px; }

/* Historial de cotizaciones */
#q-history-card .row.wrap{ margin:6px 0 12px; }
.q-history-list{ display:flex; flex-direction:column; gap:8px; max-height:420px; overflow:auto; }
.qh-item{
  display:grid; grid-template-columns:110px 1fr 120px 120px auto; gap:8px; align-items:center;
  padding:10px; border:1px solid var(--border); border-radius:10px; background:var(--card-alt);
}
.qh-item .meta{ color:var(--muted); font-size:12px; }
.qh-item .actions{ display:flex; gap:6px; justify-content:flex-end; }

/* ===== Lista de precios ===== */
#tab-precios{ overflow-x:auto; }
#tab-precios table.table{ min-width:1280px; border-collapse:separate; border-spacing:0; }
#tab-precios th, #tab-precios td{ white-space:nowrap; padding:6px 8px; }
#tab-precios td input{ height:28px; padding:2px 6px; font-size:.95rem; border-radius:8px; text-transform:none; }
#tab-precios td input[type="number"]{ width:8ch; min-width:6ch; max-width:12ch; text-align:right; }
#tab-precios thead th{ position:sticky; top:0; z-index:1; }
#tab-precios td:first-child, #tab-precios th:first-child{ position:sticky; left:0; z-index:2; background:inherit; }

/* ===== Ventas – layout (dos columnas) ===== */
.ventas-grid{ display:grid; grid-template-columns:420px minmax(420px,1fr); gap:14px; }
@media (max-width:1024px){ .ventas-grid{ grid-template-columns:1fr; } }

.ventas-left .table-wrap.small table.table th,
.ventas-left .table-wrap.small table.table td{ font-size:12px; padding:6px; }

/* Pestañas de ventas (cada venta abierta) */
.sales-tab{ padding:6px 12px; border-radius:14px; background:var(--sales-tab-bg); cursor:pointer; color:var(--sales-tab-text); border:1px solid var(--tab-border); font-size:12.5px; letter-spacing:.3px; font-weight:500; display:inline-flex; align-items:center; gap:4px; transition:background .22s ease,color .22s ease,border-color .22s ease, box-shadow .22s ease; }
.sales-tab:hover{ background:var(--highlight-bg); }
.sales-tab.active{
  background:var(--sales-tab-bg-active);
  color:var(--text);
  border-color:var(--sales-tab-border-active);
  box-shadow:0 0 0 1px var(--sales-tab-border-active), 0 2px 5px -2px rgba(0,0,0,.4);
  font-weight:600;
}

/* Filas marcadas como agregadas desde cotización → venta */
#sv-q-body tr.added{ background:var(--added-row-bg); border-left:4px solid var(--added-row-border); }
#sv-q-body tr.added td{ opacity:.97; }
.sales-tab .close{ margin-left:6px; opacity:.8; cursor:pointer; }

.avatar{ width:42px; height:42px; border-radius:50%; background:var(--avatar-bg); display:inline-flex; align-items:center; justify-content:center; color:var(--text); font-weight:600; font-size:14px; }
.plate.chip{ display:inline-block; background:var(--plate-chip-bg); padding:4px 12px; border-radius:999px; color:var(--plate-chip-text); font-weight:700; letter-spacing:.5px; box-shadow:0 0 0 1px rgba(255,255,255,.05),0 2px 4px rgba(0,0,0,.25); }
.cols-2{ display:grid; grid-template-columns:1fr 1fr; }
.cols-2 .col>input{ width:100%; }
.t-center{ text-align:center; }

/* ===== Ventas – pickers (Inventario / Lista de Precios) ===== */
.picker-head{
  display:grid; grid-template-columns:1fr 1fr auto; gap:8px; align-items:end; margin-bottom:8px;
}
@media (max-width:900px){ .picker-head{ grid-template-columns:1fr; } }
.picker-table table{ min-width:980px; }
.picker-actions{ display:flex; justify-content:space-between; align-items:center; margin-top:8px; }
.table .thumb{ width:44px; height:44px; object-fit:cover; border-radius:6px; display:inline-block; }
.table .thumb-qr{ width:44px; height:44px; object-fit:contain; background:#111; border-radius:6px; cursor:pointer; }
.w-fit{ white-space:nowrap; }

/* ===== Ventas – lector QR ===== */
.qrbar{ justify-content:space-between; margin-bottom:8px; }
.qrwrap{ position:relative; background:#0d1117; border-radius:8px; padding:8px; display:flex; justify-content:center; }
.qrwrap video{ width:100%; max-height:320px; border-radius:6px; background:#000; }
.qrwrap .qr-hud{ position:absolute; inset:8px; border:2px dashed rgba(255,255,255,.2); border-radius:6px; pointer-events:none; }
.qr-history{ margin-top:6px; max-height:120px; overflow:auto; font-size:.9rem; opacity:.8; }

/* ===== Utilidades ===== */
.sr-only{
  position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0);
  white-space:nowrap; border:0;
}
.t-right{ text-align:right; }
.muted{ color:var(--muted); }

/* ===== Badges de origen (ventas) ===== */
.inv-badge{
  display:inline-block; font-size:10px; letter-spacing:.5px; font-weight:600; padding:2px 6px; border-radius:6px;
  background:var(--inv-badge-bg); color:var(--inv-badge-text); border:1px solid var(--inv-badge-border);
  vertical-align:middle; line-height:1.1; margin-right:4px;
}
.sale-row-inventory td{ position:relative; }
.sale-row-inventory td:first-child{ box-shadow:inset 3px 0 0 0 var(--inv-badge-bg); }
/* Price list rows */
.sale-row-price td:first-child{ box-shadow:inset 3px 0 0 0 var(--price-badge-bg); }
/* Service rows */
.sale-row-service td:first-child{ box-shadow:inset 3px 0 0 0 var(--service-badge-bg); }

/* Badges de origen adicionales */
.price-badge, .service-badge{ display:inline-block; font-size:10px; letter-spacing:.5px; font-weight:600; padding:2px 6px; border-radius:6px; vertical-align:middle; line-height:1.1; margin-right:4px; }
.price-badge{ background:var(--price-badge-bg); color:var(--price-badge-text); border:1px solid var(--price-badge-border); }
.service-badge{ background:var(--service-badge-bg); color:var(--service-badge-text); border:1px solid var(--service-badge-border); }

/* Forgot password link */
.forgot-wrapper{ margin-top:8px; text-align:right; }
.forgot-link{ font-size:12px; text-decoration:none; color:var(--accent); opacity:.9; transition:color .2s ease, opacity .2s ease; }
.forgot-link:hover{ opacity:1; text-decoration:underline; }

/* ===== Ventas – cápsulas nuevas ===== */
.capsules-bar{ padding:12px 16px; }
.sale-capsule{
  background:var(--card-alt); border:1px solid var(--border); border-radius:14px; padding:10px 12px; min-width:150px; max-width:210px; position:relative;
  display:flex; flex-direction:column; gap:4px; cursor:pointer; transition:background .2s ease,border-color .2s ease, box-shadow .2s ease;
}
.sale-capsule:hover{ background:var(--highlight-bg); }
.sale-capsule.active{ border-color:var(--accent); box-shadow:0 0 0 1px var(--accent),0 4px 12px -4px rgba(0,0,0,.4); }
.sale-capsule .sc-top{ display:flex; justify-content:space-between; align-items:center; font-size:12px; font-weight:600; letter-spacing:.5px; }
.sale-capsule .sc-plate{ background:var(--plate-chip-bg); color:var(--plate-chip-text); padding:2px 8px; border-radius:999px; font-size:11px; }
.sale-capsule .sc-close{ background:transparent; border:0; color:var(--muted); font-size:14px; cursor:pointer; padding:0 4px; line-height:1; }
.sale-capsule .sc-close:hover{ color:var(--text); }
.sale-capsule .sc-tech{ font-size:11px; color:var(--muted); min-height:14px; }
.sale-capsule .sc-total{ font-size:13px; font-weight:600; text-align:right; }
.sale-capsule .sc-veh{ font-size:11px; line-height:1.2; color:var(--muted); min-height:22px; }
.fullwidth-bar{ width:100%; }
.capsules-wrap{ width:100%; }

