:root{
  --bg:#0f172a;         /* fondo general */
  --card:#111827;       /* tarjetas/paneles */
  --text:#e5e7eb;       /* texto base */
  --muted:#9ca3af;      /* texto secundario */
  --accent:#2563eb;     /* botones/activos */
  --danger:#ef4444;     /* acciones destructivas */
}

/* ===== Base ===== */
*{ box-sizing:border-box; }
html,body{ min-height:100%; }
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
  background:var(--bg);
  color:var(--text);
}
.hidden{ display:none; }

header{
  display:flex; justify-content:space-between; align-items:center;
  padding:16px 24px; border-bottom:1px solid #1f2937;
}
h1{ margin:0; font-size:20px; }
main{ padding:16px; max-width:1100px; margin:0 auto; }
footer{ text-align:center; color:var(--muted); padding:20px; }

/* ===== Componentes ===== */
.card{
  background:var(--card);               /* <-- oscuro (corregido) */
  border:1px solid #1f2937;
  border-radius:12px;
  padding:16px;
  margin-bottom:16px;
}

label{
  display:block; font-size:12px; color:var(--muted); margin-top:8px;
}

input,select,textarea{
  width:100%; padding:10px; border-radius:10px;
  border:1px solid #374151; background:#0b1220; color:var(--text);
}
textarea{ resize:vertical; }

button{
  background:var(--accent); color:#fff; border:0;
  padding:10px 14px; border-radius:10px; cursor:pointer; margin-top:10px;
}
button.secondary{ background:transparent; color:var(--text); border:1px solid #334155; }
button.danger{ background:var(--danger); }

.row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:16px; }
.span-2{ grid-column:1 / -1; }

@media (max-width:900px){
  .grid-2{ grid-template-columns:1fr; }
}

/* ===== Tabs de la app ===== */
.tabs{ display:flex; gap:6px; margin-bottom:12px; }
.tabs button{ background:#0b1220; border:1px solid #1f2937; }
.tabs button.active{ background:var(--accent); }

/* ===== Secciones (show/hide) ===== */
.tab{ display:none; }
.tab.active{ display:block; }
.tab[hidden]{ display:none !important; }

/* ===== Notas – Filtros ===== */
#notes-filters .filters-bar{
  display:grid; grid-template-columns:1.2fr 1fr 1fr auto; gap:12px; align-items:end;
}
#notes-filters .filters-bar .field label{ margin-top:0; }
#notes-filters .filters-bar .apply-field button{ margin-top:0; }
@media (max-width:900px){ #notes-filters .filters-bar{ grid-template-columns:1fr; } }

/* ===== Inventario ===== */
#inventory-top{ display:grid; grid-template-columns:1fr 1fr; gap:16px; align-items:stretch; }
#inventory-top .card{ height:100%; }
#vi-card-lista{ min-height:420px; }

/* Tarjeta de ítem en inventario */
#itemsList .list-item{
  display:grid; grid-template-columns:1fr 2fr auto; gap:16px; align-items:center;
  padding:16px; border:1px solid rgba(255,255,255,.06); border-radius:12px; margin-bottom:12px;
}
.it-gallery{ display:flex; gap:8px; flex-wrap:wrap; }
.it-gallery img{
  width:96px; height:96px; object-fit:cover; border-radius:8px; border:1px solid rgba(255,255,255,.08);
}
.it-qr{ display:flex; flex-direction:column; align-items:center; gap:6px; }
.it-qr img{
  width:140px; height:140px; image-rendering:pixelated; border-radius:8px; background:#fff;
  padding:6px; border:1px solid rgba(255,255,255,.12);
}
.it-qr-actions{ display:flex; gap:8px; }
.it-text .it-title{ font-weight:700; margin-bottom:6px; }
.it-text .it-line span{ opacity:.75; }

/* Galería genérica de medios */
.item-media{ display:grid; grid-template-columns:repeat(auto-fill,minmax(120px,1fr)); gap:8px; margin-top:8px; }
.item-thumb{
  width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:10px; border:1px solid #1f2937; background:#0b1220;
  cursor:zoom-in; transition:transform .15s ease;
}
.item-thumb:hover{ transform:scale(1.02); }

/* ===== Lista de stickers ===== */
.sticker-toolbar{ gap:10px; align-items:center; margin-top:8px; }
.sticker-check{ display:inline-flex; gap:8px; align-items:center; font-size:13px; color:var(--muted); }
.sticker-check input[type="checkbox"]{ width:18px; height:18px; accent-color:var(--accent); }

/* ===== Notas – tarjeta y badge de placa ===== */
.note{ border:1px solid #1f2937; border-radius:10px; padding:12px; background:#0b1220; }
.note .actions{ margin-top:8px; }
.note .plate{
  --plate-color:#6d28d9;
  display:inline-block; padding:3px 10px; border:2px solid var(--plate-color);
  color:#fff; background:rgba(0,0,0,.66); border-radius:9999px; font-weight:800; letter-spacing:.5px; margin-bottom:8px;
}

/* ===== Tablas genéricas ===== */
.table-wrap{ overflow:auto; }
.table{ width:100%; border-collapse:collapse; font-size:14px; }
.table th,.table td{ border:1px solid #1f2937; padding:8px; }
.table th{ background:#0b1220; position:sticky; top:0; z-index:1; }
.table input,.table select{ width:100%; }

/* ===== Modal global ===== */
#modal.modal{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center; padding:24px;
  background:rgba(2,6,23,.55); backdrop-filter:blur(4px); z-index:10000;
}
#modal.modal:not(.hidden){ display:flex; }
#modal .modal-content{
  position:relative; width:min(800px,100%); max-height:85vh; overflow:auto;
  background:var(--card); border:1px solid #1f2937; border-radius:14px; padding:16px; box-shadow:0 10px 35px rgba(0,0,0,.45);
}
#modal .close{
  position:absolute; top:8px; right:8px; background:transparent; border:0; color:#cbd5e1;
  font-size:22px; line-height:1; width:32px; height:32px; border-radius:8px; cursor:pointer;
}
#modal .close:hover{ background:#0b1220; }

/* ===== Cotizaciones ===== */
#q-summary{ overflow:auto; scrollbar-width:thin; scrollbar-color:#334155 #0b1220; }
#q-summary::-webkit-scrollbar{ width:8px; }
#q-summary::-webkit-scrollbar-track{ background:#0b1220; border-radius:8px; }
#q-summary::-webkit-scrollbar-thumb{ background:#334155; border-radius:8px; border:2px solid #0b1220; }
#q-summary .q-no{ margin:0 0 8px 0; font-size:1rem; }
#q-summary .q-no strong{ font-size:1.2rem; font-weight:700; }

/* Ítems en tarjetas (2 cols) */
.q-grid-2cols{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:16px; }
@media (max-width:900px){ .q-grid-2cols{ grid-template-columns:1fr; } }
.tr.q-row-card, .q-row-card{
  display:flex !important; flex-direction:column !important; gap:8px; padding:12px;
  border:1px solid #1f2937; border-radius:10px; background:#0b1220;
}
.q-row-card>div{ width:100%; }
.q-row-card .small input{ text-align:right; }
#q-items-card .totals{ display:flex; gap:16px; flex-wrap:wrap; margin-top:6px; }

/* Historial de cotizaciones */
#q-history-card .row.wrap{ margin:6px 0 12px; }
.q-history-list{ display:flex; flex-direction:column; gap:8px; max-height:420px; overflow:auto; }
.qh-item{
  display:grid; grid-template-columns:110px 1fr 120px 120px auto; gap:8px; align-items:center;
  padding:10px; border:1px solid #1f2937; border-radius:10px; background:#0b1220;
}
.qh-item .meta{ color:var(--muted); font-size:12px; }
.qh-item .actions{ display:flex; gap:6px; justify-content:flex-end; }

/* ===== Lista de precios ===== */
#tab-precios{ overflow-x:auto; }
#tab-precios table.table{ min-width:1280px; border-collapse:separate; border-spacing:0; }
#tab-precios th, #tab-precios td{ white-space:nowrap; padding:6px 8px; }
#tab-precios td input{ height:28px; padding:2px 6px; font-size:.95rem; border-radius:8px; text-transform:none; }
#tab-precios td input[type="number"]{ width:8ch; min-width:6ch; max-width:12ch; text-align:right; }
#tab-precios thead th{ position:sticky; top:0; z-index:1; }
#tab-precios td:first-child, #tab-precios th:first-child{ position:sticky; left:0; z-index:2; background:inherit; }

/* ===== Ventas – layout (dos columnas) ===== */
.ventas-grid{ display:grid; grid-template-columns:420px minmax(420px,1fr); gap:14px; }
@media (max-width:1024px){ .ventas-grid{ grid-template-columns:1fr; } }

.ventas-left .table-wrap.small table.table th,
.ventas-left .table-wrap.small table.table td{ font-size:12px; padding:6px; }

.sales-tab{ padding:6px 10px; border-radius:14px; background:#0b1220; cursor:pointer; }
.sales-tab.active{ background:#1b2640; font-weight:600; }
.sales-tab .close{ margin-left:6px; opacity:.8; cursor:pointer; }

.avatar{ width:42px; height:42px; border-radius:50%; background:#1b2640; }
.plate.chip{ display:inline-block; background:#152033; padding:4px 10px; border-radius:999px; color:#fff; font-weight:600; }
.cols-2{ display:grid; grid-template-columns:1fr 1fr; }
.cols-2 .col>input{ width:100%; }
.t-center{ text-align:center; }

/* ===== Ventas – pickers (Inventario / Lista de Precios) ===== */
.picker-head{
  display:grid; grid-template-columns:1fr 1fr auto; gap:8px; align-items:end; margin-bottom:8px;
}
@media (max-width:900px){ .picker-head{ grid-template-columns:1fr; } }
.picker-table table{ min-width:980px; }
.picker-actions{ display:flex; justify-content:space-between; align-items:center; margin-top:8px; }
.table .thumb{ width:44px; height:44px; object-fit:cover; border-radius:6px; display:inline-block; }
.table .thumb-qr{ width:44px; height:44px; object-fit:contain; background:#111; border-radius:6px; cursor:pointer; }
.w-fit{ white-space:nowrap; }

/* ===== Ventas – lector QR ===== */
.qrbar{ justify-content:space-between; margin-bottom:8px; }
.qrwrap{ position:relative; background:#0d1117; border-radius:8px; padding:8px; display:flex; justify-content:center; }
.qrwrap video{ width:100%; max-height:320px; border-radius:6px; background:#000; }
.qrwrap .qr-hud{ position:absolute; inset:8px; border:2px dashed rgba(255,255,255,.2); border-radius:6px; pointer-events:none; }
.qr-history{ margin-top:6px; max-height:120px; overflow:auto; font-size:.9rem; opacity:.8; }

/* ===== Utilidades ===== */
.sr-only{
  position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0);
  white-space:nowrap; border:0;
}
.t-right{ text-align:right; }
.muted{ color:var(--muted); }

/* ===== Picker de cotizaciones (modal) ===== */
.picker-two{
  display:grid; grid-template-columns: 1fr 320px; gap:12px; align-items:start; margin-top:8px;
}
@media (max-width: 900px){
  .picker-two{ grid-template-columns:1fr; }
}
.picker-side{ position:sticky; top:8px; }
#pq-items td, #pq-items th{ font-size:13px; }

/* === Ventas: cápsulas/tabs === */
#saleTabs{
  display:flex; flex-wrap:wrap; gap:8px; align-items:center;
  margin:8px 0 12px;
}
#saleTabs .chip{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border-radius:9999px;
  background: rgba(148,163,184,.12); /* slate-400/12 */
  color:#e5e7eb; border:1px solid rgba(148,163,184,.2);
  line-height:1; font-size:.95rem; user-select:none;
  transition: background .15s ease,border-color .15s ease,color .15s ease,transform .15s ease;
}
#saleTabs .chip:hover{
  background: rgba(148,163,184,.2); border-color: rgba(148,163,184,.35);
}
#saleTabs .chip.active{
  background:#2563eb20; /* blue-600/12 */
  border-color:#2563eb; color:#fff;
  box-shadow:0 0 0 1px #2563eb inset;
}
#saleTabs .chip .close{
  display:inline-block; font-weight:700; margin-left:4px; padding:0 4px;
  border-radius:9999px; opacity:.85;
}
#saleTabs .chip .close:hover{ background:rgba(255,255,255,.12); cursor:pointer; opacity:1; }
#saleTabs .chip:active{ transform:translateY(1px); }

/* === Tablas utilitarias (pickers / mini paneles) === */
.table{ width:100%; border-collapse:collapse; }
.table th,.table td{ padding:8px 10px; border-bottom:1px solid rgba(148,163,184,.12); }
.table th{ text-align:left; font-weight:600; color:#cbd5e1; background:rgba(148,163,184,.06); }
.table-wrap{ overflow:auto; }

/* === Picker genérico (buscar cotizaciones / inventario / precios) === */
.picker-head{
  display:grid; grid-template-columns: repeat(3, minmax(0,1fr));
  gap:10px; margin-bottom:12px;
}
.picker-table{
  max-height:48vh; overflow:auto;
  border:1px solid rgba(148,163,184,.12); border-radius:10px;
}
.picker-actions{ margin-top:10px; display:flex; justify-content:space-between; align-items:center; }
.muted{ color:#94a3b8; opacity:.85; }
.row{ display:flex; gap:8px; align-items:center; }

/* === QR modal === */
.qrbar{ display:flex; justify-content:space-between; gap:10px; align-items:center; margin-bottom:8px; }
.qrwrap{
  position:relative; aspect-ratio:4/3; background:#0b1220;
  border:1px dashed rgba(148,163,184,.25); border-radius:10px; overflow:hidden;
}
#qr-video{ width:100%; height:100%; object-fit:cover; }
.qr-hud{ position:absolute; inset:0; box-shadow:0 0 0 200vmax rgba(0,0,0,.14) inset; pointer-events:none; }
.qr-history{ margin-top:6px; max-height:25vh; overflow:auto; display:flex; flex-direction:column; gap:4px; }
.qr-history li{ font-size:.85rem; color:#94a3b8; list-style:disc; margin-left:1rem; }

/* === Pequeñas utilidades === */
.thumb{ width:40px; height:40px; object-fit:cover; border-radius:8px; }
.w-fit{ width:1%; white-space:nowrap; }
